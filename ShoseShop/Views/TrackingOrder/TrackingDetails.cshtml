
@model ShoseShop.Data.PhieuMua
<link rel="stylesheet" href="~/css/tracking.css" />

<div class="order-details-container" style="margin-bottom:60px;">
    <h1 class="text-center mr-1">Chi tiết đơn hàng</h1>
    <p>Trạng thái: @Html.Partial("_OrderStatus", @Model.TinhTrang)</p>
    <div>
        <h4>Mã đơn hàng: @Model.MaPhieuMua</h4>
        <div class="d-flex justify-content-between">
            <div class="order-details-grid" style="text-align:left; margin-top: 20px;">
                <div>Ngày đặt:</div>
                <div>@Model.NgayMua.ToString("dd/MM/yyyy")</div>
            </div>
            <div class="total-amount">
                Tổng số tiền: @Model.TongTien?.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))
            </div>
        </div>

        <div class="order-details-grid" style="text-align:left; margin-top: 20px;">
            <div>Tên người nhận:</div><div>@Model.TenNguoiNhan</div>
            <div>Số điện thoại:</div><div>@Model.SoDienThoaiNguoiNhan</div>
            <div>Email:</div><div>@Model.EmailNguoiNhan</div>
            <div>Địa chỉ người nhận:</div><div>@Model.DiaChiNguoiNhan</div>
            <div>Ghi chú:</div><div>@Model.GhiChu</div>
        </div>

        <h3>Đặt hàng các mặt hàng</h3>
        <table class="table table-striped">
            <thead class="text-center">
                <tr>
                    <th>Tên sản phẩm</th>
                    <th>Hình ảnh</th>
                    <th>Số lượng</th>
                    <th>Kích cỡ</th>
                    <th>Màu sắc</th>
                    <th>Đơn giá</th>
                    <th>Tổng giá</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ChiTietPhieuMuas)
                {
                    var totalPrice = item.SoLuong * item.DonGia;
                    <tr class="text-center">
                        <td>@item.MaSPSizeNavigation.MaSPCTNavigation.MaSPNavigation.TenSanPham</td>
                        <td>
                            <img src="~/Content/img/@item.MaSPSizeNavigation.MaSPCTNavigation.MaSPNavigation/@item.MaSPSizeNavigation.MaSPCTNavigation.AnhDaiDien"
                                 style="width:100px;height:100px;border-radius:3px;" />
                        </td>
                        <td>@item.SoLuong</td>
                        <td>@item.MaSPSizeNavigation.MaSizeNavigation.TenSize</td>
                        <td>@item.MaSPSizeNavigation.MaSPCTNavigation.MaMauNavigation.TenMau</td>
                        <td>@item.DonGia.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</td>
                        <td>@totalPrice.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<style>
    .order-details-grid {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 10px 20px;
    }

        .order-details-grid div {
            padding: 5px 0;
        }

    .d-flex {
        display: flex;
        justify-content: space-between;
    }

    .total-amount {
        display: flex;
        align-items: center;
    }
</style>
